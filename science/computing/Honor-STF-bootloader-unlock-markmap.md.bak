# Bootloader Unlock

## Resources

- <a href="https://github.com/mashed-potatoes/PotatoNV" target="_blank">PotatoNV</a>
  - Free and open-source solution
  - <a href="https://linktr.ee/potatonv" target="_blank">Official tutorials</a>
  - <a href="https://www.youtube.com/watch?v=A2y8UCoaigg" target="_blank">Huawei USB COM 1.0 Driver</a>
- <a href="https://fr.ifixit.com/Vue+%C3%89clat%C3%A9e/Huawei+Honor+9+Teardown/97287?lang=en" target="_blank">IFixit Teardown Guide</a>
- <a href="https://www.youtube.com/watch?v=wobm5wfcWKM" target="_blank">Test point shorting on Honor STF</a>
- <a href="https://xdaforums.com/t/rom-huawei-13-leaos-lineage-20-0-for-huawei-device-emui-9-1-version.4560779/" target="_blank">LineageOS for EMUI 9 Huawei</a>

## Export

- Backup all data
  - Factory reset warning
- List installed packages
  - ```bash
    adb shell pm list packages -3
    ```
  - `-3`: User-installed only

## Unlock procedure

### Hardware preparation

1. Disconnect battery for 3s
2. Plug battery back in
3. Ground testpoint for 3s
4. Plug USB while grounding

### Bootloader unlock

- Reboot to bootloader
  - ```bash
    adb reboot bootloader
    ```
- Check devices
  - ```bash
    fastboot devices
    ```
- Unlock
  - ```bash
    fastboot oem unlock <key>
    fastboot oem get-bootinfo
    ```

### Install custom ROM

- Install LeaOS
- Install custom recovery
  - <a href="https://sourceforge.net/projects/altairfr-huawei/" target="_blank">TWRP fork by altairfr</a>
- Flash commands
  - ```bash
    fastboot flash system <system.img>
    fastboot flash recovery_ramdisk <twrp.img>
    fastboot reboot recovery
    ```
- <a href="https://twrp.me/faq/ADBSideload.html" target="_blank">ADB sideload</a>
  - TWRP: Advanced â†’ ADB Sideload
  - ```bash
    adb sideload <patch.zip>
    ```

## Why LineageOS?

- Reliability
- Balance
  - Security vs customizability
- Limitations
  - Based on Android
  - FBE compulsory
- Custom kernels
  - Can disable FBE
  - Trade-offs
    - Security: All files unprotected
    - Flexibility: Complete system access
    - Reliability: Lower data loss risk
